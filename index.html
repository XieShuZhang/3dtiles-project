<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>3DTiles Viewer</title>
    <script src="https://cesium.com/downloads/cesiumjs/releases/1.116/Build/Cesium/Cesium.js"></script>
    <link href="https://cesium.com/downloads/cesiumjs/releases/1.116/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
    <style>
        html,
        body,
        #cesiumContainer {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        /* ğŸ‘‡ å¼ºåˆ¶éšè—æ‰€æœ‰ Cesium æ°´å° */
        .cesium-widget-credits,
        .cesium-credit-logoContainer,
        .cesium-credit-textContainer,
        div[class*='cesium-credit'] {
            display: none !important;
        }
    </style>
</head>

<body>
    <div id="cesiumContainer"></div>
    <script>
        const viewer = new Cesium.Viewer('cesiumContainer', {
            terrain: Cesium.Terrain.fromWorldTerrain({
                requestVertexNormals: true,
                requestWaterMask: true
            }),
            // ğŸ‘‡ å¯ç”¨ WebGL é€æ˜ï¼Œå¦åˆ™ backgroundColor æ— æ•ˆ
            contextOptions: {
                webgl: {
                    alpha: true
                }
            },

            // éšè— UI æ§ä»¶
            geocoder: false,
            homeButton: false,
            sceneModePicker: false,
            baseLayerPicker: false,
            animation: false,
            timeline: false,
            navigationHelpButton: false,
            fullscreenButton: false,
            vrButton: false,

            // å…³é—­ç‰ˆæƒæ°´å°
            credits: false,
            creditPosition: null,

        });

        viewer.scene.skyBox.show = false;          // å…³é—­æ˜Ÿç©ºèƒŒæ™¯
        viewer.scene.skyAtmosphere.show = false;   // å…³é—­è“è‰²å¤§æ°”å…‰æ™•
        viewer.scene.backgroundColor = Cesium.Color.BLACK; // è®¾ç½®çº¯é»‘èƒŒæ™¯

        // åŠ è½½ 3DTiles å¹¶è‡ªåŠ¨èšç„¦
        (async () => {
            try {
                // å®šä¹‰è¦åŠ è½½çš„å¤šä¸ªtilesetè·¯å¾„
                const tilesetPaths = [
                    './models/11-NE-22A/tileset.json',
                    './models/11-NE-22B/tileset.json',
                    './models/11-NE-22C/tileset.json',
                    './models/11-NE-22D/tileset.json',
                    // './models/11-NE-17A/tileset.json',
                    // './models/11-NE-17B/tileset.json',
                    // './models/11-NE-17C/tileset.json',
                    // './models/11-NE-17D/tileset.json',
                    // './models/11-NE-16B/tileset.json',
                    // './models/11-NE-16D/tileset.json',
                    // './models/11-NE-21B/tileset.json',
                    // './models/11-NE-21D/tileset.json',

                ];

                // åŠ è½½æ‰€æœ‰tileset
                const tilesetPromises = tilesetPaths.map(path =>
                    Cesium.Cesium3DTileset.fromUrl(path)
                );

                // ç­‰å¾…æ‰€æœ‰tilesetåŠ è½½å®Œæˆ
                const tilesets = await Promise.all(tilesetPromises);

                // å°†æ‰€æœ‰tilesetæ·»åŠ åˆ°åœºæ™¯ä¸­
                tilesets.forEach(tileset => {
                    viewer.scene.primitives.add(tileset);
                });

                // ç­‰å¾…æ‰€æœ‰tilesetå‡†å¤‡å°±ç»ªåèšç„¦
                const readyPromises = tilesets.map(tileset => tileset.readyPromise);
                await Promise.all(readyPromises);

                // èšç„¦åˆ°æ‰€æœ‰tilesetçš„ç»„åˆèŒƒå›´
                const boundingSpheres = tilesets.map(tileset => tileset.boundingSphere);
                if (boundingSpheres.length > 0) {
                    const unionSphere = Cesium.BoundingSphere.fromBoundingSpheres(boundingSpheres);
                    viewer.camera.setView({
                        destination: unionSphere.center,
                        orientation: {
                            heading: Cesium.Math.toRadians(0),
                            pitch: Cesium.Math.toRadians(-90),
                            roll: 0.0
                        }
                    });
                }

            } catch (error) {
                console.error('âŒ 3DTiles åŠ è½½å¤±è´¥:', error);
            }
        })();
    </script>
</body>

</html>